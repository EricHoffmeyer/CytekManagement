---
title: "Cytek Management"
#output: html_notebook
---

# Load Libraries

```{r}
library(dplyr)
library(tidyr)
library(ggplot2)
library(chron)
```

# Read in data

Read in csv files for galender and user/lab key

```{r}
cal_data <- read.csv('cytek_google_calendar.csv')
lab_key <- read.csv('lab_key.csv')
```

# Data wrangling

Separate date into month, day, and year.
Coerce start and end column into time values.
Create a use_time column by subtracting start time from end time
Join lab_key to cal_data, adding a lab name column
Remove NA values

```{r}
# Add :00 to all times for conversion
cal_data$start <- paste(cal_data$start, ':00')
cal_data$end <- paste(cal_data$end, ':00')

cal_data <- cal_data |>
  separate(date, into = c('month', 'day', 'year'), sep = '/' ) |>
  mutate(time_start = chron(times. = start),
         time_end = chron(times. = end),
         use_time = time_end - time_start) |>
  left_join(lab_key, by = c('name' = 'user')) |>
  na.omit()
```

```{r}
cal_data$use_time <- (as.numeric(cal_data$use_time)) * 24
```

```{r}
ggplot(cal_data, aes(lab, use_time, color = lab)) +
  geom_col()
```

```{r}

```







